# ğŸš€ IonAPI v1.1.0 Release Notes

## Overview
Version 1.1.0 is a major update focused on **security**, **economy**, and **enterprise features**. This release transforms IonAPI into a complete plugin development framework with production-ready features.

---

## ğŸ”’ Security Fixes (Critical)

### SQL Injection Prevention
- **Fixed**: SQL injection vulnerability in `QueryBuilderImpl`
- **Implementation**: All column names, operators, and ORDER BY directions are now sanitized
- **Methods**: `sanitizeIdentifier()`, `sanitizeOperator()`, `sanitizeDirection()`
- **Impact**: Prevents malicious SQL injection through query builder

### Resource Leak Fix
- **Fixed**: Connection leak in `TransactionImpl` constructor
- **Implementation**: Proper try-catch with connection cleanup if `setAutoCommit(false)` fails
- **Impact**: Prevents database connection exhaustion

---

## ğŸ’° Economy System (ion-economy)

### Core Features
- **EconomyProvider**: Async-first economy interface with BigDecimal precision
- **Currency**: Multi-currency support with custom formatting
- **TransactionResult**: Detailed transaction outcomes (SUCCESS, INSUFFICIENT_FUNDS, etc.)
- **EconomyAccount**: Database entity with thread-safe operations
- **IonEconomy**: Static API entry point with fluent transactions
- **Vault Hook**: Full Vault compatibility for existing plugins

### Admin Commands
```
/ion eco set <player> <amount>   - Set player balance
/ion eco give <player> <amount>  - Give money to player
/ion eco debug <player>          - View raw database state
```

### Example Usage
```java
// Check balance
IonEconomy.getBalance(player.getUniqueId()).thenAccept(balance -> {
    player.sendMessage("Balance: " + IonEconomy.format(balance));
});

// Fluent transaction
IonEconomy.transaction(player.getUniqueId())
    .withdraw(100)
    .reason("Shop purchase")
    .commit();
```

---

## ğŸš€ Enterprise Features

### ORM Relationships
- **@OneToMany**: One-to-many relationships with lazy/eager loading
- **@ManyToOne**: Many-to-one relationships
- **@JoinColumn**: Foreign key column specification
- **FetchType**: EAGER/LAZY loading strategies
- **CascadeType**: Cascade operations (ALL, PERSIST, MERGE, REMOVE, REFRESH)

### Entity Caching
- **@Cacheable**: Mark entities for caching with TTL and max size
- **EntityCache**: Thread-safe cache with automatic expiration
- **CacheManager**: Centralized cache management with statistics

### Example
```java
@Table("player_settings")
@Cacheable(ttl = 60, maxSize = 500)
public class PlayerSettings {
    @PrimaryKey
    private UUID playerId;
    
    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "guild_id")
    private Guild guild;
}
```

---

## ğŸ”´ Redis Integration (ion-redis)

### Features
- **Pub/Sub Messaging**: Cross-server communication
- **Key-Value Storage**: With TTL support
- **Connection Pooling**: Lettuce-based async client
- **Health Monitoring**: Connection stats and uptime tracking

### Example Usage
```java
IonRedis redis = IonRedisBuilder.create()
    .host("localhost")
    .port(6379)
    .password("secret")
    .build();

// Subscribe to channel
redis.subscribe("player-events", message -> {
    Bukkit.broadcastMessage("Event: " + message.data());
});

// Publish message
redis.publish("player-events", "Player joined: " + player.getName());

// Key-value with TTL
redis.set("player:" + uuid, data, 3600); // 1 hour
```

---

## ğŸ”¥ Hot-Reload Configuration

### Features
- **WatchService**: Automatic file change detection
- **Multiple Handlers**: Register multiple reload callbacks
- **Real-time Updates**: No server restart required
- **Error Handling**: Graceful failure with logging

### Example Usage
```java
HotReloadConfig config = HotReloadConfig.create(this, "config.yml")
    .onReload(cfg -> {
        welcomeMessage = cfg.getString("welcome-message");
        getLogger().info("Config reloaded!");
    })
    .start();

// Edit config.yml - changes apply instantly!
```

---

## ğŸ“¦ Distribution & CI/CD

### JitPack Configuration
- **File**: `jitpack.yml`
- **JDK**: OpenJDK 21
- **Build**: Automatic on GitHub releases
- **Maven**: Available via JitPack

### GitHub Actions
- **File**: `.github/workflows/build.yml`
- **Triggers**: Push to main/develop, pull requests
- **Actions**: Build, test, upload artifacts
- **Artifacts**: 30-day retention

---

## ğŸ“Š Comparison Table

Added comprehensive comparison table to README showing IonAPI advantages:
- âœ… Native Folia support
- âœ… Async ORM with caching
- âœ… Economy API (Vault + Async)
- âœ… Redis pub/sub
- âœ… Hot-reload config
- ğŸŸ¢ 50-80% code reduction

---

## ğŸ“š New Examples

1. **EconomyExample.java**: Economy system usage
2. **AdvancedDatabaseExample.java**: ORM relationships, caching, transactions
3. **RedisExample.java**: Cross-server messaging
4. **HotReloadExample.java**: Config hot-reloading

---

## ğŸ”§ Technical Details

### Dependencies Added
- `io.lettuce:lettuce-core:6.3.0.RELEASE` (Redis client)
- `com.github.MilkBowl:VaultAPI:1.7.1` (Economy hook)

### New Modules
- `ion-economy`: Economy system
- `ion-redis`: Redis integration

### Build System
- Added JitPack repository
- Updated Gradle configuration
- CI/CD pipeline configured

---

## ğŸ“ˆ Statistics

- **Files Changed**: 43 new files, 29 modified
- **Lines Added**: ~3,000+ lines of production code
- **Test Coverage**: Examples provided for all features
- **Documentation**: Updated README, CHANGELOG, examples

---

## ğŸ¯ Migration Guide

### From v1.0.0 to v1.1.0

**No breaking changes!** All v1.0.0 code continues to work.

**New Features to Adopt:**

1. **Economy System**:
   ```java
   // Add to dependencies
   implementation(project(":ion-economy"))
   ```

2. **Redis Integration**:
   ```java
   // Add to dependencies
   implementation(project(":ion-redis"))
   ```

3. **Entity Caching**:
   ```java
   @Cacheable(ttl = 60)
   public class MyEntity { }
   ```

4. **Hot-Reload Config**:
   ```java
   HotReloadConfig.create(this, "config.yml")
       .onReload(this::loadSettings)
       .start();
   ```

---

## ğŸ› Known Issues

None at this time. Report issues at: https://github.com/mattbaconz/IonAPI/issues

---

## ğŸ™ Credits

- **Lead Developer**: [@mattbaconz](https://github.com/mattbaconz)
- **Contributors**: Community feedback and testing
- **Libraries**: Lettuce (Redis), Vault (Economy), Paper/Folia (Platform)

---

## ğŸ“ Support

- **Discord**: https://discord.com/invite/VQjTVKjs46
- **GitHub**: https://github.com/mattbaconz/IonAPI
- **Donate**: https://ko-fi.com/mbczishim/tip

---

## ğŸ‰ What's Next?

**v1.2.0 Roadmap:**
- WebSocket support for real-time dashboards
- Advanced GUI animations
- Built-in permission system
- MongoDB integration
- GraphQL API support

---

**Thank you for using IonAPI!** â¤ï¸

*Making Minecraft plugin development easier, one release at a time.*
