# üöÄ IonAPI v1.2.0 Release Notes

**Release Date**: December 7, 2024  
**Type**: Feature Release + Performance Improvements

---

## üéØ Overview

IonAPI v1.2.0 brings significant performance improvements and a suite of new utility features to make plugin development even easier. This release focuses on developer experience with tools for cooldowns, rate limiting, messaging, UI components, and performance monitoring.

---

## ‚ö° Performance Improvements

### Reflection Caching
- **10-50x faster ORM operations** through cached entity metadata
- Eliminates repeated reflection calls for entity mapping
- Automatic field discovery and column name resolution
- Zero configuration required - works automatically

### Batch Operations
- **Bulk insert/update/delete** operations for massive performance gains
- Configurable batch sizes (default: 1000)
- Async execution support
- Detailed performance statistics

### Optimized Dependencies
- Redis Lettuce client is now `compileOnly` to reduce JAR size
- Keeps core lightweight while maintaining full functionality

---

## ‚ú® New Features

### 1. CooldownManager
Thread-safe player cooldown management with automatic cleanup.

```java
CooldownManager cooldowns = CooldownManager.create("teleport");
if (cooldowns.isOnCooldown(player.getUniqueId())) {
    long remaining = cooldowns.getRemainingTime(player.getUniqueId(), TimeUnit.SECONDS);
    player.sendMessage("Wait " + remaining + "s!");
    return;
}
cooldowns.setCooldown(player.getUniqueId(), 30, TimeUnit.SECONDS);
```

**Features:**
- Named cooldown managers for different actions
- Automatic cleanup of expired cooldowns
- Time unit flexibility
- Thread-safe operations

---

### 2. RateLimiter
Sliding window rate limiting for spam prevention.

```java
RateLimiter limiter = RateLimiter.create("chat", 5, 10, TimeUnit.SECONDS);
if (!limiter.tryAcquire(player.getUniqueId())) {
    player.sendMessage("Slow down!");
    return;
}
```

**Features:**
- Configurable window and request limits
- Per-player rate limits
- Remaining permits tracking
- Reset time information

---

### 3. MessageBuilder
Fluent MiniMessage builder with templates and placeholders.

```java
MessageBuilder.of("<green>Hello, <player>!")
    .placeholder("player", player.getName())
    .send(player);

MessageBuilder.of("<gold><bold>LEVEL UP!")
    .subtitle("<gray>Level <level>")
    .placeholder("level", "10")
    .sendTitle(player);
```

**Features:**
- MiniMessage formatting support
- Placeholder system
- Title/subtitle/action bar support
- Reusable message templates
- Broadcast functionality

---

### 4. IonScoreboard
Easy scoreboard creation with MiniMessage and dynamic placeholders.

```java
IonScoreboard board = IonScoreboard.builder()
    .title("<gradient:gold:yellow><bold>My Server")
    .line(15, "<gray>Welcome, <white>{player}")
    .line(13, "<gold>Coins: <yellow>{coins}")
    .placeholder("player", p -> p.getName())
    .placeholder("coins", p -> String.valueOf(getCoins(p)))
    .build();

board.show(player);
board.update(player); // Refresh
```

**Features:**
- MiniMessage formatting
- Dynamic placeholders with functions
- Per-player scoreboards
- Easy updates
- Automatic cleanup

---

### 5. IonBossBar
Boss bar management with MiniMessage and dynamic updates.

```java
IonBossBar bar = IonBossBar.builder()
    .title("<gradient:red:orange>Event: {progress}%")
    .color(BossBar.Color.RED)
    .progress(0.5f)
    .placeholder("progress", p -> "50")
    .build();

bar.show(player);
bar.setProgress(0.75f);
```

**Features:**
- MiniMessage formatting
- Progress updates
- Color and style changes
- Named bars for retrieval
- Dynamic placeholders

---

### 6. Metrics
Lightweight performance monitoring system.

```java
Metrics.increment("player.join");
Metrics.gauge("players.online", Bukkit.getOnlinePlayers().size());

String result = Metrics.time("database.query", () -> {
    return db.findAll(PlayerData.class);
});

double avgTime = Metrics.getAverageTime("database.query");
```

**Features:**
- Counters for events
- Timing statistics (min/max/average)
- Gauge values
- Zero overhead when not used
- Thread-safe operations

---

### 7. BatchOperation
Efficient bulk database operations.

```java
List<PlayerStats> stats = new ArrayList<>();
// ... populate list

BatchOperation.BatchResult result = database.batch(PlayerStats.class)
    .insertAll(stats)
    .batchSize(500)
    .execute();

System.out.println("Inserted " + result.insertedCount() + " in " + result.executionTimeMs() + "ms");
```

**Features:**
- 10-50x faster than individual operations
- Configurable batch sizes
- Async execution support
- Detailed performance statistics
- Mixed operations (insert/update/delete)

---

### 8. ReflectionCache
Automatic entity metadata caching for ORM.

**Features:**
- Automatic field discovery
- Column name resolution
- Primary key detection
- Zero configuration
- Massive performance improvement

---

## üìä Module Sizes

| Module | v1.1.0 | v1.2.0 | Change |
|--------|--------|--------|--------|
| ion-api | 12.5 KB | 23.8 KB | +11.3 KB |
| ion-database | 41.5 KB | 52.7 KB | +11.2 KB |
| ion-ui | - | 10.5 KB | New |
| **Total** | **252 KB** | **273 KB** | **+21 KB** |

Still ultra-lightweight! The new features add only 21 KB total.

---

## üìö Documentation Updates

- ‚úÖ Complete API Reference with all v1.2.0 features
- ‚úÖ Updated Examples with practical use cases
- ‚úÖ Quick Reference cheat sheet
- ‚úÖ Comprehensive Javadocs
- ‚úÖ New `V120FeaturesExample.java` with working examples

---

## üîß Installation

### Gradle (Kotlin DSL)

```kotlin
dependencies {
    implementation("com.github.mattbaconz:IonAPI:1.2.0")
}

tasks.shadowJar {
    relocate("com.ionapi", "your.plugin.libs.ionapi")
}
```

### Maven

```xml
<dependency>
    <groupId>com.github.mattbaconz</groupId>
    <artifactId>IonAPI</artifactId>
    <version>1.2.0</version>
</dependency>
```

---

## üîÑ Migration from v1.1.0

No breaking changes! v1.2.0 is fully backward compatible with v1.1.0.

Simply update your dependency version and start using the new features.

---

## üì¶ Release Artifacts

**JARs to download:**
- `ion-api-1.2.0.jar` (23.8 KB)
- `ion-paper-1.2.0-all.jar` (13.2 KB)
- `ion-folia-1.2.0-all.jar` (12.9 KB)

**JitPack:** Automatically bundles all modules when you use:
```kotlin
implementation("com.github.mattbaconz:IonAPI:1.2.0")
```

---

## üêõ Bug Fixes

- Fixed BossBar API compatibility with Adventure API
- Improved error handling in batch operations
- Enhanced thread safety in cooldown and rate limiter

---

## üéØ What's Next?

### Planned for v1.3.0
- Particle API for easy particle effects
- Sound API with spatial audio
- Hologram API for floating text
- Advanced GUI animations
- More performance optimizations

---

## üí¨ Support

- **Discord**: https://discord.com/invite/VQjTVKjs46
- **GitHub**: https://github.com/mattbaconz/IonAPI
- **Ko-fi**: https://ko-fi.com/mbczishim/tip
- **PayPal**: https://www.paypal.com/paypalme/MatthewWatuna

---

## üôè Credits

**Author**: mattbaconz  
**Contributors**: Community feedback and testing

Thank you to everyone who provided feedback and helped test v1.2.0!

---

## üìÑ License

IonAPI is licensed under the MIT License. See LICENSE file for details.
